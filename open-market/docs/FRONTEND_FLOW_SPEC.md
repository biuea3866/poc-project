# 🖥️ 프론트엔드 플로우 스펙 (FRONTEND_FLOW_SPEC.md)

> **담당**: LLM Agent
> **범위**: 화면 플로우, 사용자 인터랙션, 상태 관리 전략
> **주의**: 이 문서는 코드 레벨이 아닌 플로우/기능 레벨 정의입니다.

---

## 1. 프론트엔드 역할 정의

### 1.1 담당 영역
- 사용자 인터페이스 구현 (구매자, 셀러, 관리자)
- 백엔드 API 연동
- 클라이언트 상태 관리
- 사용자 경험 최적화

### 1.2 담당하지 않는 영역
- 비즈니스 로직 (백엔드 담당)
- 데이터베이스 설계 (백엔드 담당)
- 외부 서비스 연동 로직 (백엔드 담당)

---

## 2. 애플리케이션 구조

### 2.1 앱 유형별 분리

```
┌─────────────────────────────────────────────────────────────────┐
│                      프론트엔드 앱 구조                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │   구매자 앱     │  │   셀러 어드민   │  │  플랫폼 어드민  │ │
│  │  (Buyer App)    │  │ (Seller Admin)  │  │(Platform Admin) │ │
│  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘ │
│           │                    │                     │          │
│           └────────────────────┼─────────────────────┘          │
│                                │                                 │
│                        ┌───────┴───────┐                        │
│                        │   공통 모듈    │                        │
│                        │ (컴포넌트, 훅) │                        │
│                        └───────────────┘                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 각 앱별 URL 구조

```
[구매자 앱]
/                          # 메인 페이지
/login                     # 로그인
/signup                    # 회원가입
/products                  # 상품 목록
/products/:id              # 상품 상세
/cart                      # 장바구니
/orders/checkout           # 주문/결제
/orders                    # 주문 내역
/orders/:id                # 주문 상세
/mypage                    # 마이페이지
/mypage/profile            # 프로필 수정
/mypage/addresses          # 배송지 관리
/mypage/coupons            # 쿠폰함
/mypage/points             # 포인트
/mypage/reviews            # 리뷰 관리
/mypage/inquiries          # 문의 내역
/shops/:id                 # 가게 페이지
/events                    # 이벤트/기획전
/search                    # 검색 결과

[셀러 어드민]
/seller/login              # 셀러 로그인
/seller/signup             # 셀러 가입
/seller/dashboard          # 대시보드
/seller/products           # 상품 관리
/seller/products/new       # 상품 등록
/seller/products/:id/edit  # 상품 수정
/seller/orders             # 주문 관리
/seller/orders/:id         # 주문 상세
/seller/settlements        # 정산 관리
/seller/shop               # 가게 설정
/seller/ads                # 광고 관리
/seller/reviews            # 리뷰 관리
/seller/inquiries          # 문의 관리
/seller/channels           # 채널 연동
/seller/stats              # 통계

[플랫폼 어드민]
/admin/login               # 관리자 로그인
/admin/dashboard           # 대시보드
/admin/members             # 회원 관리
/admin/sellers             # 셀러 관리
/admin/sellers/pending     # 입점 심사
/admin/products            # 상품 관리
/admin/orders              # 주문 관리
/admin/settlements         # 정산 관리
/admin/display             # 전시 관리
/admin/promotions          # 프로모션 관리
/admin/categories          # 카테고리 관리
/admin/cs                  # 고객센터 관리
/admin/settings            # 시스템 설정
```

---

## 3. 화면별 플로우 정의

### 3.1 구매자 앱 플로우

#### 메인 페이지 플로우
```
[사용자 진입]
     │
     ▼
┌─────────────────────────────────────────────────────┐
│  메인 페이지                                         │
│  ┌─────────────────────────────────────────────────┐│
│  │  헤더: 로고, 검색창, 카테고리, 로그인, 장바구니  ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  메인 배너 (슬라이드)                            ││
│  │  → 배너 클릭 시 해당 이벤트/기획전 이동          ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  카테고리 바로가기                               ││
│  │  → 카테고리 클릭 시 해당 카테고리 상품 목록      ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  추천 상품 섹션                                  ││
│  │  → 상품 클릭 시 상품 상세 페이지                 ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  기획전 배너                                     ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  푸터                                            ││
│  └─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
```

#### 상품 검색/목록 플로우
```
[검색창에 키워드 입력]
     │
     ├── 타이핑 중 → 자동완성 드롭다운 표시
     │
     └── Enter 또는 검색 버튼 클릭
              │
              ▼
     ┌─────────────────────────────────────┐
     │  검색 결과 페이지                    │
     │  - 검색어 표시                       │
     │  - 필터 사이드바 (카테고리, 가격 등) │
     │  - 정렬 옵션                         │
     │  - 상품 그리드                       │
     │  - 페이지네이션 / 더보기             │
     └─────────────────────────────────────┘
              │
              ├── 필터 변경 → URL 업데이트 + 목록 갱신
              ├── 정렬 변경 → URL 업데이트 + 목록 갱신
              └── 상품 클릭 → 상품 상세 페이지
```

#### 상품 상세 → 장바구니 → 주문 플로우
```
[상품 상세 페이지]
     │
     ├── 이미지 갤러리 인터랙션 (썸네일 클릭, 확대)
     ├── 옵션 선택 (필수)
     ├── 수량 변경
     │
     ├── "장바구니 담기" 클릭
     │        │
     │        ▼
     │   ┌─────────────────────┐
     │   │  장바구니 담기 완료  │
     │   │  모달/토스트         │
     │   │  - 장바구니 보기     │
     │   │  - 쇼핑 계속하기     │
     │   └─────────────────────┘
     │
     └── "바로 구매" 클릭
              │
              ▼
     [주문/결제 페이지]
              │
              ├── 배송지 선택/입력
              ├── 쿠폰 선택
              ├── 포인트 입력
              ├── 결제 수단 선택
              │
              └── "결제하기" 클릭
                       │
                       ▼
              [PG 결제창 호출]
                       │
               ┌───────┴───────┐
               ▼               ▼
          [결제 성공]      [결제 실패]
               │               │
               ▼               ▼
          주문 완료       에러 표시
          페이지         재시도 유도
```

#### 장바구니 플로우
```
[장바구니 페이지 진입]
     │
     ▼
┌─────────────────────────────────────────────────────┐
│  장바구니                                            │
│  ┌─────────────────────────────────────────────────┐│
│  │  전체 선택 체크박스                              ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  가게 A                                          ││
│  │  ├── 상품 1 [체크] [이미지] [정보] [수량] [삭제] ││
│  │  └── 상품 2 [체크] [이미지] [정보] [수량] [삭제] ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  가게 B                                          ││
│  │  └── 상품 3 [체크] [이미지] [정보] [수량] [삭제] ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  결제 예상 금액                                  ││
│  │  상품금액: ₩100,000                             ││
│  │  배송비: ₩3,000                                 ││
│  │  합계: ₩103,000                                 ││
│  │  [선택 상품 주문하기]                            ││
│  └─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘

[인터랙션]
- 수량 변경 → 실시간 합계 갱신
- 상품 삭제 → 확인 모달 → 목록에서 제거
- 품절 상품 → 비활성화 표시 + 알림
- 전체 선택 → 모든 상품 선택/해제
```

#### 주문 내역/상세 플로우
```
[마이페이지 > 주문 내역]
     │
     ▼
┌─────────────────────────────────────────────────────┐
│  주문 내역                                           │
│  ┌─────────────────────────────────────────────────┐│
│  │  상태 탭: 전체 | 결제완료 | 배송중 | 완료 | 취소 ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  [주문 카드]                                     ││
│  │  주문번호: 2025010400001                        ││
│  │  주문일: 2025-01-04                             ││
│  │  상품 이미지 + 상품명 외 N건                     ││
│  │  결제금액: ₩50,000                              ││
│  │  상태: 배송중                                    ││
│  │  [주문 상세] [배송 추적]                         ││
│  └─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
     │
     └── 주문 상세 클릭
              │
              ▼
     ┌─────────────────────────────────────┐
     │  주문 상세                           │
     │  - 주문 정보                         │
     │  - 주문 상품 목록                    │
     │  - 배송 정보                         │
     │  - 결제 정보                         │
     │  - 상태별 액션 버튼                  │
     │    (취소/반품/교환/리뷰작성 등)      │
     └─────────────────────────────────────┘
```

### 3.2 셀러 어드민 플로우

#### 대시보드 플로우
```
[셀러 어드민 대시보드]
     │
     ▼
┌─────────────────────────────────────────────────────┐
│  대시보드                                            │
│  ┌──────────┬──────────┬──────────┬──────────┐     │
│  │  신규주문 │  발송대기 │  문의대기 │  오늘매출 │     │
│  │    15    │    8     │    3     │ ₩1.2M   │     │
│  └──────────┴──────────┴──────────┴──────────┘     │
│  ┌─────────────────────────────────────────────────┐│
│  │  매출 차트 (일별/주별/월별 탭)                   ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────┐ ┌─────────────────────────┐│
│  │  베스트 상품 Top 5  │ │  최근 주문 목록         ││
│  └─────────────────────┘ └─────────────────────────┘│
└─────────────────────────────────────────────────────┘
     │
     ├── "신규주문" 클릭 → 주문 관리 (신규 필터)
     ├── "발송대기" 클릭 → 주문 관리 (발송대기 필터)
     └── "문의대기" 클릭 → 문의 관리
```

#### 상품 등록 플로우
```
[상품 관리 > 상품 등록]
     │
     ▼
┌─────────────────────────────────────────────────────┐
│  상품 등록                                           │
│  ┌─────────────────────────────────────────────────┐│
│  │  Step 1: 기본 정보                               ││
│  │  - 카테고리 선택 (대 > 중 > 소)                  ││
│  │  - 상품명                                        ││
│  │  - 판매가                                        ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  Step 2: 이미지                                  ││
│  │  - 대표 이미지 (드래그앤드롭)                    ││
│  │  - 추가 이미지                                   ││
│  │  - 상세 이미지                                   ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  Step 3: 옵션/재고                               ││
│  │  - 옵션 유형 선택 (단일/조합)                    ││
│  │  - 옵션값 입력                                   ││
│  │  - 옵션별 가격/재고 입력                         ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  Step 4: 상세 설명                               ││
│  │  - 리치 에디터 (WYSIWYG)                         ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  Step 5: 배송 설정                               ││
│  │  - 배송비 정책                                   ││
│  │  - 출고 소요일                                   ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  [임시저장]  [판매대기로 저장]  [바로 판매시작] ││
│  └─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
```

#### 주문 처리 플로우
```
[주문 관리]
     │
     ▼
┌─────────────────────────────────────────────────────┐
│  주문 목록                                           │
│  ┌─────────────────────────────────────────────────┐│
│  │  필터: 상태 | 기간 | 검색                        ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  [테이블]                                        ││
│  │  □ 주문번호 | 상품 | 구매자 | 금액 | 상태 | 액션 ││
│  │  ☑ 001     | ...  | 홍길동 | 50K  | 결제완료 |   ││
│  │  ☑ 002     | ...  | 김철수 | 30K  | 결제완료 |   ││
│  └─────────────────────────────────────────────────┘│
│  ┌─────────────────────────────────────────────────┐│
│  │  [선택 주문 발송처리]                            ││
│  └─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
     │
     └── 발송처리 클릭
              │
              ▼
     ┌─────────────────────────────────────┐
     │  발송 정보 입력 모달                 │
     │  - 택배사 선택                       │
     │  - 송장번호 입력                     │
     │  - [일괄 발송 처리]                  │
     └─────────────────────────────────────┘
              │
              ▼
     발송 완료 → 구매자에게 알림 발송
```

---

## 4. 상태 관리 전략

### 4.1 상태 유형 분류

```
┌─────────────────────────────────────────────────────────────────┐
│                        상태 관리 전략                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [서버 상태] - React Query/SWR 사용                             │
│  - 상품 목록, 상품 상세                                          │
│  - 주문 목록, 주문 상세                                          │
│  - 회원 정보                                                     │
│  - 모든 API 응답 데이터                                          │
│  → 캐싱, 백그라운드 리페치, 낙관적 업데이트                      │
│                                                                  │
│  [클라이언트 상태] - Zustand/Context 사용                        │
│  - 인증 상태 (로그인 여부, 토큰)                                 │
│  - 장바구니 (로그인 전 로컬 저장)                                │
│  - UI 상태 (모달, 사이드바, 토스트)                              │
│  - 필터/정렬 상태                                                │
│  → 브라우저에서만 관리, 서버 동기화 불필요                       │
│                                                                  │
│  [URL 상태] - Query String 사용                                  │
│  - 검색어                                                        │
│  - 필터 값                                                       │
│  - 정렬 옵션                                                     │
│  - 페이지 번호                                                   │
│  → 공유 가능, 뒤로가기 동작                                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 데이터 페칭 전략

```
[초기 로딩]
- SSR: SEO 필요한 페이지 (상품 상세, 메인)
- CSR: 인증 필요한 페이지 (마이페이지, 어드민)

[캐싱]
- 상품 목록: 1분 캐시
- 상품 상세: 5분 캐시
- 카테고리: 1시간 캐시
- 사용자 정보: 로그아웃까지 유지

[리페치 트리거]
- 포커스 복귀 시 (staleTime 이후)
- 장바구니 담기 후 장바구니 리페치
- 주문 완료 후 포인트/쿠폰 리페치
```

---

## 5. 인증/인가 플로우

### 5.1 인증 플로우

```
[로그인 플로우]
     │
     ├── 이메일 + 비밀번호 입력
     │        │
     │        ▼
     │   POST /api/auth/login
     │        │
     │        ▼
     │   응답: accessToken, refreshToken
     │        │
     │        ├── accessToken → 메모리 (Zustand)
     │        └── refreshToken → httpOnly Cookie (서버 설정)
     │
     └── 소셜 로그인
              │
              ▼
         소셜 로그인 페이지 리다이렉트
              │
              ▼
         콜백 URL로 리다이렉트 (토큰 포함)
              │
              ▼
         토큰 저장 → 홈 이동

[토큰 갱신 플로우]
API 요청 → 401 응답
     │
     ▼
refreshToken으로 갱신 시도
     │
     ├── 성공 → 새 accessToken 저장 → 원래 요청 재시도
     └── 실패 → 로그아웃 처리 → 로그인 페이지 이동

[로그아웃 플로우]
로그아웃 클릭 → 토큰 삭제 → 상태 초기화 → 홈 이동
```

### 5.2 인가 (권한) 플로우

```
[라우트 보호]
     │
     ├── 구매자 전용 페이지 (/mypage, /orders)
     │        │
     │        └── 로그인 확인 → 미로그인 시 로그인 페이지 이동
     │
     ├── 셀러 전용 페이지 (/seller/*)
     │        │
     │        └── 로그인 + 셀러 권한 확인 → 미충족 시 접근 불가
     │
     └── 관리자 전용 페이지 (/admin/*)
              │
              └── 로그인 + 관리자 권한 확인 → 미충족 시 접근 불가
```

---

## 6. API 연동 전략

### 6.1 API 호출 규칙

```
[요청]
- Base URL: 환경변수로 관리
- 인증 헤더: Authorization: Bearer {accessToken}
- Content-Type: application/json

[응답 처리]
- 성공: { success: true, data: {...} }
- 실패: { success: false, error: { code, message } }

[에러 처리]
- 400: 유효성 검증 실패 → 폼 에러 표시
- 401: 인증 실패 → 토큰 갱신 또는 로그인 유도
- 403: 권한 없음 → 접근 불가 안내
- 404: 리소스 없음 → 404 페이지
- 500: 서버 에러 → 에러 페이지 또는 재시도 유도
```

### 6.2 낙관적 업데이트

```
[장바구니 수량 변경]
1. UI 즉시 업데이트 (낙관적)
2. API 호출
3. 성공 → 그대로 유지
4. 실패 → 롤백 + 에러 표시

[좋아요/찜하기]
1. 버튼 상태 즉시 변경
2. API 호출
3. 실패 시 롤백
```

---

## 7. 실시간 기능

### 7.1 실시간 업데이트가 필요한 영역

```
[구매자]
- 주문 상태 변경 알림
- 재입고 알림
- 장바구니 상품 품절/가격 변경 알림

[셀러]
- 신규 주문 알림 (실시간)
- 문의 등록 알림
- 리뷰 등록 알림

[구현 방식]
- 폴링: 10초마다 새 알림 확인 (기본)
- SSE/WebSocket: 실시간 알림 (고급, 선택적)
```

---

## 8. 에러/로딩 상태 처리

### 8.1 로딩 상태

```
[페이지 로딩]
- 전체 페이지 스켈레톤 UI 표시
- 또는 로딩 스피너

[부분 로딩]
- 해당 영역만 스켈레톤/스피너
- 나머지 영역은 정상 표시

[버튼 로딩]
- 버튼 내 스피너 표시
- 버튼 비활성화 (중복 클릭 방지)
```

### 8.2 에러 상태

```
[네트워크 에러]
- 전역 에러 토스트
- "다시 시도" 버튼

[페이지 에러]
- 에러 바운더리로 캐치
- 에러 페이지 표시 + 홈으로 이동 버튼

[폼 에러]
- 필드별 에러 메시지 표시
- 폼 상단에 요약 에러 표시
```

---

## 9. 반응형/접근성

### 9.1 반응형 전략

```
[브레이크포인트]
- Mobile: < 768px
- Tablet: 768px ~ 1024px
- Desktop: > 1024px

[레이아웃 변화]
- Mobile: 단일 컬럼, 햄버거 메뉴
- Tablet: 2컬럼 그리드, 축소된 사이드바
- Desktop: 다중 컬럼, 풀 사이드바

[우선 순위]
- Mobile First 접근
```

### 9.2 접근성

```
- 키보드 네비게이션 지원
- 스크린 리더 호환 (aria-label)
- 충분한 색상 대비
- 포커스 표시
```
