# 🎯 오픈마켓 서비스 플로우 기획서

> 이 문서는 오픈마켓 플랫폼의 전체 비즈니스 플로우를 정의합니다.
> 백엔드 개발자는 이 플로우를 기반으로 도메인을 설계하고 구현합니다.

---

## 1. 서비스 개요

### 1.1 서비스 정의
B2C/C2C 오픈마켓 플랫폼으로, 다양한 판매자(개인/기업)가 상품을 등록하고 구매자가 상품을 구매할 수 있는 온라인 마켓플레이스

### 1.2 사용자 유형

| 유형 | 코드 | 설명 |
|------|------|------|
| **구매자** | BUYER | 상품을 검색하고 구매하는 일반 사용자 |
| **개인 셀러** | INDIVIDUAL_SELLER | 개인 사업자 또는 간이과세자로 입점한 판매자 |
| **기업 셀러** | BUSINESS_SELLER | 법인 사업자로 입점한 판매자 |
| **플랫폼 관리자** | PLATFORM_ADMIN | 오픈마켓 플랫폼 전체를 관리하는 운영자 |

### 1.3 핵심 가치
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                  │
│   판매자: 쉬운 입점, 다채널 판매, 정산 관리, 광고 집행           │
│                          ↓                                       │
│   플랫폼: 거래 중개, 결제 처리, 배송 추적, 분쟁 해결             │
│                          ↓                                       │
│   구매자: 다양한 상품, 안전한 결제, 빠른 배송, 리뷰 참고         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 도메인 정의

### 2.1 도메인 맵

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         오픈마켓 도메인 맵                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │    회원     │  │    가게     │  │    상품     │  │   카테고리   │    │
│  │   (User)    │  │   (Shop)    │  │  (Product)  │  │  (Category) │    │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └─────────────┘    │
│         │                │                │                              │
│         └────────────────┴────────────────┘                              │
│                          │                                               │
│  ┌─────────────┐  ┌──────┴──────┐  ┌─────────────┐  ┌─────────────┐    │
│  │   장바구니   │  │    전시     │  │    검색     │  │    광고     │    │
│  │   (Cart)    │  │  (Display)  │  │  (Search)   │  │    (Ad)     │    │
│  └──────┬──────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
│         │                                                                │
│  ┌──────┴──────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │    주문     │──│    결제     │──│    배송     │──│    정산     │    │
│  │   (Order)   │  │  (Payment)  │  │ (Delivery)  │  │(Settlement) │    │
│  └──────┬──────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
│         │                                                                │
│  ┌──────┴──────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │    리뷰     │  │  쿠폰/프로모 │  │   포인트    │  │    알림     │    │
│  │  (Review)   │  │  (Promotion)│  │  (Point)    │  │(Notification)│   │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
│                                                                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                      │
│  │   고객센터   │  │   재고     │  │  외부연동   │                      │
│  │  (CS/QnA)   │  │  (Stock)    │  │ (External)  │                      │
│  └─────────────┘  └─────────────┘  └─────────────┘                      │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 도메인별 역할

| 도메인 | 역할 | 주요 기능 |
|--------|------|----------|
| **회원 (User)** | 사용자 인증/인가, 프로필 관리 | 회원가입, 로그인, 권한 관리, 배송지 관리 |
| **가게 (Shop)** | 판매자의 상점 관리 | 입점 신청, 가게 정보, 영업 상태, 셀러 등급 |
| **상품 (Product)** | 판매 상품 관리 | 상품 등록/수정, 옵션, 이미지, 상태 관리 |
| **카테고리 (Category)** | 상품 분류 체계 | 카테고리 트리, 속성 관리 |
| **재고 (Stock)** | 상품 재고 관리 | 재고 수량, 입출고, 재고 알림 |
| **장바구니 (Cart)** | 구매 전 상품 보관 | 담기, 수량 변경, 삭제, 유효성 검사 |
| **주문 (Order)** | 구매 주문 처리 | 주문 생성, 상태 관리, 취소/반품/교환 |
| **결제 (Payment)** | 결제 처리 | PG 연동, 결제 승인, 취소, 환불 |
| **배송 (Delivery)** | 배송 관리 | 배송 상태, 송장 관리, 배송 추적 |
| **정산 (Settlement)** | 판매 대금 정산 | 정산 계산, 수수료, 지급 |
| **리뷰 (Review)** | 상품/가게 리뷰 | 리뷰 작성, 평점, 포토 리뷰 |
| **쿠폰/프로모션 (Promotion)** | 할인 정책 관리 | 쿠폰 발급, 기획전, 할인 적용 |
| **포인트 (Point)** | 적립금 관리 | 적립, 사용, 소멸, 이력 |
| **전시 (Display)** | 상품 노출 관리 | 메인 배너, 기획전, 추천 |
| **검색 (Search)** | 상품 검색 | 키워드 검색, 필터, 자동완성 |
| **광고 (Ad)** | 유료 광고 관리 | 광고 등록, 노출, 과금, 리포트 |
| **알림 (Notification)** | 사용자 알림 | 푸시, 이메일, SMS, 카카오톡 |
| **고객센터 (CS)** | 고객 문의 처리 | 1:1 문의, FAQ, 분쟁 처리 |
| **외부연동 (External)** | 외부 플랫폼 연동 | 채널 연동, 웹훅, OpenAPI |

---

## 3. 회원 플로우

### 3.1 회원가입 플로우

```
[구매자 회원가입]
┌─────────────────────────────────────────────────────────────────┐
│  1. 회원가입 페이지 진입                                         │
│  2. 가입 유형 선택: 구매자                                       │
│  3. 약관 동의 (필수/선택)                                        │
│  4. 본인 인증 (휴대폰 또는 아이핀)                               │
│  5. 계정 정보 입력 (이메일, 비밀번호)                            │
│  6. 추가 정보 입력 (이름, 연락처)                                │
│  7. 가입 완료 → 구매자 권한 부여                                 │
└─────────────────────────────────────────────────────────────────┘

[개인 셀러 회원가입]
┌─────────────────────────────────────────────────────────────────┐
│  1. 회원가입 페이지 진입                                         │
│  2. 가입 유형 선택: 개인 셀러                                    │
│  3. 약관 동의 (판매자 약관 포함)                                 │
│  4. 본인 인증                                                    │
│  5. 계정 정보 입력                                               │
│  6. 사업자 정보 입력                                             │
│     - 사업자등록번호                                             │
│     - 대표자명                                                   │
│     - 사업장 주소                                                │
│     - 업태/업종                                                  │
│  7. 정산 계좌 등록                                               │
│  8. 서류 제출 (사업자등록증 사본)                                │
│  9. 가입 신청 완료 → "심사 대기" 상태                            │
│  10. 관리자 심사                                                  │
│  11. 승인 → 개인 셀러 권한 부여, 가게 생성 가능                  │
└─────────────────────────────────────────────────────────────────┘

[기업 셀러 회원가입]
┌─────────────────────────────────────────────────────────────────┐
│  1~5. 개인 셀러와 동일                                           │
│  6. 법인 사업자 정보 입력                                        │
│     - 법인등록번호                                               │
│     - 법인명                                                     │
│     - 대표이사                                                   │
│  7. 담당자 정보 (여러 명 등록 가능)                              │
│  8. 정산 계좌 등록 (법인 계좌)                                   │
│  9. 서류 제출                                                    │
│     - 사업자등록증                                               │
│     - 법인등기부등본                                             │
│     - 통신판매업 신고증                                          │
│  10. 가입 신청 완료 → "심사 대기"                                │
│  11. 관리자 심사 (더 엄격한 검토)                                │
│  12. 승인 → 기업 셀러 권한 부여                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 로그인 플로우

```
[일반 로그인]
이메일 + 비밀번호 → 인증 → JWT 토큰 발급 → 로그인 완료

[소셜 로그인]
소셜 선택(카카오/네이버/구글) → OAuth 인증 → 회원 확인/생성 → JWT 발급

[셀러 로그인]
이메일 + 비밀번호 → 인증 → 셀러 상태 확인(활성/정지) → 어드민 접근 권한 확인 → 로그인
```

---

## 4. 셀러(어드민) 플로우

### 4.1 가게 입점 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                        가게 입점 프로세스                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [셀러 회원가입 완료]                                            │
│         │                                                        │
│         ▼                                                        │
│  ┌─────────────────┐                                            │
│  │  가게 생성 신청  │                                            │
│  │  - 가게명        │                                            │
│  │  - 가게 소개     │                                            │
│  │  - 대표 이미지   │                                            │
│  │  - 판매 카테고리 │                                            │
│  │  - 반품/교환 정책│                                            │
│  │  - 고객센터 정보 │                                            │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐     ┌─────────────────┐                    │
│  │   심사 대기     │────▶│  관리자 심사    │                    │
│  │  (PENDING)     │     │                 │                    │
│  └─────────────────┘     └────────┬────────┘                    │
│                                   │                              │
│                    ┌──────────────┼──────────────┐              │
│                    ▼              ▼              ▼              │
│           ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│           │    승인      │ │   반려       │ │  보완 요청   │   │
│           │  (APPROVED)  │ │ (REJECTED)   │ │ (REVISION)   │   │
│           └──────┬───────┘ └──────────────┘ └──────────────┘   │
│                  │                                               │
│                  ▼                                               │
│           ┌──────────────┐                                      │
│           │  가게 오픈   │                                      │
│           │  (ACTIVE)    │                                      │
│           └──────────────┘                                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 셀러 어드민 기능

```
┌─────────────────────────────────────────────────────────────────┐
│                     셀러 어드민 대시보드                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ [오늘의 현황]                                                ││
│  │  - 신규 주문: 15건                                          ││
│  │  - 발송 대기: 8건                                           ││
│  │  - 문의 답변 대기: 3건                                       ││
│  │  - 오늘 매출: ₩1,250,000                                    ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
│  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐       │
│  │ 상품 관리 │ │ 주문 관리 │ │ 정산 관리 │ │ 가게 설정 │       │
│  └───────────┘ └───────────┘ └───────────┘ └───────────┘       │
│  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐       │
│  │ 광고 관리 │ │ 리뷰 관리 │ │ 문의 관리 │ │ 통계/리포트│       │
│  └───────────┘ └───────────┘ └───────────┘ └───────────┘       │
│  ┌───────────┐ ┌───────────┐                                    │
│  │ 쿠폰 관리 │ │ 채널 연동 │                                    │
│  └───────────┘ └───────────┘                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4.3 상품 관리 플로우

```
[상품 등록]
┌─────────────────────────────────────────────────────────────────┐
│  1. 상품 등록 버튼 클릭                                          │
│  2. 카테고리 선택 (대/중/소)                                     │
│  3. 기본 정보 입력                                               │
│     - 상품명, 판매가, 할인가                                     │
│     - 상품 설명 (에디터)                                         │
│  4. 이미지 등록                                                  │
│     - 대표 이미지 (필수)                                         │
│     - 추가 이미지 (최대 10장)                                    │
│     - 상세 이미지                                                │
│  5. 옵션 설정                                                    │
│     - 단일 옵션 (색상) / 조합 옵션 (색상+사이즈)                 │
│     - 옵션별 가격, 재고                                          │
│  6. 배송 정보                                                    │
│     - 배송비 정책 (무료/유료/조건부)                             │
│     - 배송 가능 지역                                             │
│     - 출고 소요일                                                │
│  7. 상품 상태 선택                                               │
│     - 즉시 판매 / 임시 저장 / 예약 판매                          │
│  8. 등록 완료 → 상품 목록에 표시                                 │
└─────────────────────────────────────────────────────────────────┘

[재고 관리]
┌─────────────────────────────────────────────────────────────────┐
│  - 재고 수량 직접 수정                                           │
│  - 재고 부족 알림 설정 (N개 이하 시 알림)                        │
│  - 품절 시 자동 판매 중지                                        │
│  - 재고 입출고 이력 관리                                         │
└─────────────────────────────────────────────────────────────────┘
```

### 4.4 주문 처리 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                      셀러 주문 처리 플로우                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [신규 주문 접수]                                                │
│         │                                                        │
│         ▼                                                        │
│  ┌─────────────────┐                                            │
│  │  주문 확인      │ ← 주문 상세 확인, 재고 확인                 │
│  └────────┬────────┘                                            │
│           │                                                      │
│     ┌─────┴─────┐                                               │
│     ▼           ▼                                               │
│  ┌──────┐   ┌──────┐                                            │
│  │ 승인 │   │ 거부 │ → 사유 입력 → 구매자 알림                  │
│  └──┬───┘   └──────┘                                            │
│     │                                                            │
│     ▼                                                            │
│  ┌─────────────────┐                                            │
│  │  상품 준비      │ ← 포장, 송장 출력                          │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  발송 처리      │ ← 택배사, 송장번호 입력                    │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  배송 중        │ ← 배송 추적 정보 자동 연동                  │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  배송 완료      │ → 구매 확정 대기 (7일)                      │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  구매 확정      │ → 정산 대상 등록                            │
│  └─────────────────┘                                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4.5 반품/교환/취소 처리

```
[취소 요청 처리]
구매자 취소 요청 → 셀러 확인 → 승인/거부 → 승인 시 환불 처리

[반품 요청 처리]
구매자 반품 신청 → 셀러 확인 → 반품 사유 확인 → 승인/거부
  → 승인 시 → 반품 수거 → 상품 확인 → 환불 처리

[교환 요청 처리]
구매자 교환 신청 → 셀러 확인 → 교환 가능 여부 확인 → 승인/거부
  → 승인 시 → 반품 수거 + 새 상품 발송
```

### 4.6 정산 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                         정산 프로세스                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [구매 확정]                                                     │
│       │                                                          │
│       ▼                                                          │
│  ┌─────────────────┐                                            │
│  │  정산 대상 등록  │ ← 판매가 - 수수료 = 정산 예정금            │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  정산 집계      │ ← 정산 주기별 집계 (주간/격주/월간)         │
│  │  (매주 월요일)   │                                            │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  정산서 발행    │ ← 셀러 어드민에서 확인 가능                 │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                            │
│  │  지급 처리      │ ← 등록된 정산 계좌로 입금                   │
│  │  (수요일)       │                                             │
│  └─────────────────┘                                            │
│                                                                  │
│  정산 내역:                                                      │
│  - 매출액: ₩10,000,000                                          │
│  - 플랫폼 수수료 (10%): -₩1,000,000                             │
│  - 결제 수수료 (3%): -₩300,000                                  │
│  - 광고비: -₩200,000                                            │
│  ─────────────────────                                          │
│  - 정산 금액: ₩8,500,000                                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 구매자 플로우

### 5.1 상품 탐색 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                      상품 탐색 경로                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [메인 페이지]                                                   │
│       │                                                          │
│       ├── 검색창 → 키워드 검색 → 검색 결과 → 상품 상세           │
│       │                                                          │
│       ├── 카테고리 → 카테고리별 상품 목록 → 상품 상세            │
│       │                                                          │
│       ├── 배너 → 기획전/프로모션 페이지 → 상품 상세              │
│       │                                                          │
│       ├── 추천 상품 → 상품 상세                                  │
│       │                                                          │
│       └── 베스트 상품 → 상품 상세                                │
│                                                                  │
│  [상품 목록]                                                     │
│  - 필터: 가격대, 배송 방법, 평점, 할인율                         │
│  - 정렬: 인기순, 최신순, 가격순, 리뷰순                          │
│  - 페이지네이션 / 무한 스크롤                                    │
│                                                                  │
│  [상품 상세]                                                     │
│  - 상품 이미지 갤러리                                            │
│  - 상품 정보 (가격, 배송비, 옵션)                                │
│  - 판매자 정보, 가게 링크                                        │
│  - 리뷰 목록                                                     │
│  - 상품 문의                                                     │
│  - 유사 상품 추천                                                │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 장바구니 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                        장바구니 플로우                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [상품 상세에서]                                                 │
│       │                                                          │
│       ├── "장바구니 담기" 클릭                                   │
│       │       │                                                  │
│       │       ▼                                                  │
│       │   옵션 선택 (필요 시)                                    │
│       │       │                                                  │
│       │       ▼                                                  │
│       │   수량 선택                                              │
│       │       │                                                  │
│       │       ▼                                                  │
│       │   장바구니 추가 완료                                     │
│       │       │                                                  │
│       │       ├── "장바구니 보기" → 장바구니 페이지              │
│       │       └── "쇼핑 계속하기" → 현재 페이지 유지             │
│       │                                                          │
│       └── "바로 구매" → 주문/결제 페이지로 직행                  │
│                                                                  │
│  [장바구니 페이지]                                               │
│  - 가게별로 그룹화된 상품 목록                                   │
│  - 개별 선택 / 전체 선택                                         │
│  - 수량 변경                                                     │
│  - 상품 삭제                                                     │
│  - 품절/판매중지 상품 알림                                       │
│  - 예상 결제 금액 계산                                           │
│  - "선택 상품 주문" 버튼                                         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 5.3 주문/결제 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                       주문/결제 플로우                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [주문서 작성 페이지]                                            │
│       │                                                          │
│       ├── 1. 주문 상품 확인                                      │
│       │      - 상품 정보, 옵션, 수량, 가격                       │
│       │                                                          │
│       ├── 2. 배송지 입력/선택                                    │
│       │      - 기본 배송지 / 새 배송지 / 최근 배송지             │
│       │      - 배송 요청사항                                     │
│       │                                                          │
│       ├── 3. 할인 적용                                           │
│       │      - 쿠폰 선택 (상품쿠폰, 장바구니쿠폰, 배송비쿠폰)    │
│       │      - 포인트 사용                                       │
│       │                                                          │
│       ├── 4. 결제 금액 확인                                      │
│       │      상품금액 + 배송비 - 할인 = 최종 결제금액            │
│       │                                                          │
│       ├── 5. 결제 수단 선택                                      │
│       │      - 신용/체크카드                                     │
│       │      - 카카오페이 / 네이버페이 / 토스                    │
│       │      - 무통장입금                                        │
│       │      - 휴대폰 결제                                       │
│       │                                                          │
│       └── 6. 결제하기 버튼 클릭                                  │
│                  │                                               │
│                  ▼                                               │
│           [PG 결제창 호출]                                       │
│                  │                                               │
│           ┌──────┴──────┐                                       │
│           ▼             ▼                                       │
│       [결제 성공]   [결제 실패]                                  │
│           │             │                                        │
│           ▼             ▼                                        │
│      주문 완료      에러 표시                                    │
│      페이지         재시도 유도                                  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 5.4 주문 관리 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                      구매자 주문 관리                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [마이페이지 > 주문 내역]                                        │
│                                                                  │
│  주문 상태별 필터:                                               │
│  - 전체 / 입금대기 / 결제완료 / 배송중 / 배송완료 / 취소/반품    │
│                                                                  │
│  [주문 상세]                                                     │
│       │                                                          │
│       ├── 결제 완료 상태                                         │
│       │      └── "주문 취소" 가능                                │
│       │                                                          │
│       ├── 배송 중 상태                                           │
│       │      └── "배송 추적" 가능                                │
│       │                                                          │
│       ├── 배송 완료 상태                                         │
│       │      ├── "구매 확정" → 포인트 적립                       │
│       │      ├── "리뷰 작성"                                     │
│       │      ├── "반품 신청"                                     │
│       │      └── "교환 신청"                                     │
│       │                                                          │
│       └── 구매 확정 상태                                         │
│              └── "리뷰 작성" (미작성 시)                          │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 5.5 이벤트/프로모션 참여 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                      이벤트 참여 플로우                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [쿠폰 이벤트]                                                   │
│  - 쿠폰 다운로드 페이지 → "쿠폰 받기" 클릭 → 마이쿠폰에 저장    │
│  - 신규 가입 쿠폰 자동 발급                                      │
│  - 생일 쿠폰 자동 발급                                           │
│                                                                  │
│  [출석 체크 이벤트]                                              │
│  - 매일 출석 체크 → 포인트 적립                                  │
│  - 연속 출석 보너스                                              │
│                                                                  │
│  [기획전 이벤트]                                                 │
│  - 기획전 페이지 → 할인 상품 목록 → 구매                         │
│  - 타임딜 (한정 시간 할인)                                       │
│  - 한정 수량 특가                                                │
│                                                                  │
│  [럭키 드로우]                                                   │
│  - 응모 조건 충족 (구매 금액 등) → 응모 → 당첨자 발표            │
│                                                                  │
│  [리뷰 이벤트]                                                   │
│  - 리뷰 작성 → 추가 포인트 적립                                  │
│  - 포토/동영상 리뷰 → 더 많은 포인트                             │
│  - 베스트 리뷰 선정 → 특별 보상                                  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 도메인별 상세 플로우

### 6.1 광고 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                         광고 플로우                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [광고 유형]                                                     │
│  - 검색 광고: 검색 결과 상단에 상품 노출                         │
│  - 배너 광고: 메인/카테고리 페이지 배너 영역                     │
│  - 추천 광고: "이 상품 어때요?" 영역에 노출                      │
│  - 기획전 참여: 플랫폼 기획전에 상품 등록                        │
│                                                                  │
│  [셀러 광고 집행 플로우]                                         │
│  1. 어드민 > 광고 관리 접속                                      │
│  2. 광고 유형 선택                                               │
│  3. 광고할 상품 선택                                             │
│  4. 광고 기간/예산 설정                                          │
│     - 일 예산 한도                                               │
│     - 총 예산 한도                                               │
│     - 입찰가 설정 (CPC 방식)                                     │
│  5. 광고 심사 (자동/수동)                                        │
│  6. 광고 시작                                                    │
│  7. 성과 리포트 확인                                             │
│     - 노출수, 클릭수, CTR, 전환율, ROAS                          │
│                                                                  │
│  [광고비 정산]                                                   │
│  - 선불 충전 방식 또는 후불 정산 방식                            │
│  - 클릭당 과금 (CPC)                                             │
│  - 정산 시 광고비 차감                                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 전시 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                         전시 플로우                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [전시 영역]                                                     │
│  - 메인 배너 (슬라이드)                                          │
│  - 카테고리별 추천 상품                                          │
│  - 베스트 상품 (판매량 기준)                                     │
│  - 신상품                                                        │
│  - 기획전 배너                                                   │
│  - 개인화 추천 (AI 기반)                                         │
│                                                                  │
│  [플랫폼 관리자 전시 관리]                                       │
│  1. 배너 관리                                                    │
│     - 배너 이미지 등록                                           │
│     - 링크 URL 설정                                              │
│     - 노출 기간 설정                                             │
│     - 노출 순서 설정                                             │
│                                                                  │
│  2. 기획전 관리                                                  │
│     - 기획전 생성 (제목, 설명, 기간)                             │
│     - 참여 상품 선정/모집                                        │
│     - 기획전 페이지 디자인                                       │
│                                                                  │
│  3. 추천 로직 설정                                               │
│     - 베스트 기준 (판매량, 조회수, 리뷰 등)                      │
│     - 추천 알고리즘 파라미터                                     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.3 검색 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                         검색 플로우                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [검색 기능]                                                     │
│  - 키워드 검색                                                   │
│  - 자동완성 (타이핑 중 추천)                                     │
│  - 검색어 추천 (인기 검색어)                                     │
│  - 최근 검색어 (사용자별)                                        │
│  - 연관 검색어                                                   │
│                                                                  │
│  [검색 결과]                                                     │
│  - 상품 목록                                                     │
│  - 가게 목록 (검색어와 매칭되는 가게)                            │
│  - 카테고리 추천                                                 │
│  - 검색 광고 상품 (상단)                                         │
│                                                                  │
│  [검색 필터]                                                     │
│  - 카테고리                                                      │
│  - 가격대 (최소~최대)                                            │
│  - 배송 (무료배송, 당일배송)                                     │
│  - 평점 (N점 이상)                                               │
│  - 할인율                                                        │
│                                                                  │
│  [검색 정렬]                                                     │
│  - 정확도순 (기본)                                               │
│  - 인기순 (판매량)                                               │
│  - 최신순                                                        │
│  - 가격 낮은순/높은순                                            │
│  - 리뷰 많은순                                                   │
│  - 평점 높은순                                                   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.4 쿠폰/프로모션 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                     쿠폰/프로모션 플로우                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [쿠폰 유형]                                                     │
│  - 정액 할인 쿠폰 (₩3,000 할인)                                  │
│  - 정률 할인 쿠폰 (10% 할인, 최대 ₩5,000)                        │
│  - 배송비 쿠폰 (배송비 무료)                                     │
│  - 상품 쿠폰 (특정 상품에만 적용)                                │
│  - 카테고리 쿠폰 (특정 카테고리에만 적용)                        │
│  - 가게 쿠폰 (특정 가게에만 적용)                                │
│                                                                  │
│  [쿠폰 발급 방식]                                                │
│  - 다운로드 쿠폰 (사용자가 직접 받기)                            │
│  - 자동 발급 쿠폰 (조건 충족 시 자동)                            │
│  - 코드 입력 쿠폰 (쿠폰 코드 입력)                               │
│                                                                  │
│  [플랫폼 쿠폰 vs 셀러 쿠폰]                                      │
│  - 플랫폼 쿠폰: 플랫폼이 발행, 비용 부담                         │
│  - 셀러 쿠폰: 셀러가 발행, 비용 부담                             │
│                                                                  │
│  [쿠폰 사용 조건]                                                │
│  - 최소 주문 금액                                                │
│  - 유효 기간                                                     │
│  - 사용 가능 상품/카테고리/가게                                  │
│  - 중복 사용 가능 여부                                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.5 포인트 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                        포인트 플로우                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [포인트 적립]                                                   │
│  - 구매 확정 시: 결제 금액의 N% 적립                             │
│  - 리뷰 작성 시: 일반 리뷰 100P, 포토 리뷰 300P                  │
│  - 출석 체크: 일 10P, 연속 출석 보너스                           │
│  - 이벤트 참여: 이벤트별 상이                                    │
│  - 친구 초대: 초대/가입 시 각각 지급                             │
│                                                                  │
│  [포인트 사용]                                                   │
│  - 결제 시 현금처럼 사용                                         │
│  - 최소 사용 금액: 1,000P 이상                                   │
│  - 최대 사용 비율: 결제 금액의 50%                               │
│                                                                  │
│  [포인트 소멸]                                                   │
│  - 적립일로부터 1년 후 소멸                                      │
│  - 소멸 예정 알림 (30일 전)                                      │
│                                                                  │
│  [포인트 이력]                                                   │
│  - 적립/사용/소멸 내역 조회                                      │
│  - 유효 포인트 / 소멸 예정 포인트 확인                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.6 알림 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                         알림 플로우                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [알림 채널]                                                     │
│  - 앱 푸시 (FCM)                                                 │
│  - SMS                                                           │
│  - 이메일                                                        │
│  - 카카오 알림톡                                                 │
│  - 인앱 알림 (알림 센터)                                         │
│                                                                  │
│  [구매자 알림]                                                   │
│  - 주문 완료                                                     │
│  - 발송 완료 (송장번호 포함)                                     │
│  - 배송 완료                                                     │
│  - 구매 확정 요청                                                │
│  - 쿠폰 발급/만료 예정                                           │
│  - 포인트 적립/소멸 예정                                         │
│  - 관심 상품 가격 변동                                           │
│  - 재입고 알림                                                   │
│  - 문의 답변 완료                                                │
│                                                                  │
│  [셀러 알림]                                                     │
│  - 신규 주문 접수                                                │
│  - 취소/반품/교환 요청                                           │
│  - 문의 등록                                                     │
│  - 재고 부족 알림                                                │
│  - 정산 완료                                                     │
│  - 리뷰 등록                                                     │
│                                                                  │
│  [알림 설정]                                                     │
│  - 알림 유형별 수신 여부 설정                                    │
│  - 채널별 수신 여부 설정                                         │
│  - 방해 금지 시간 설정                                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.7 고객센터(CS) 도메인

```
┌─────────────────────────────────────────────────────────────────┐
│                       고객센터 플로우                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [1:1 문의]                                                      │
│  - 구매자 → 가게에 문의 (상품 문의)                              │
│  - 구매자 → 플랫폼에 문의 (결제, 배송, 계정 등)                  │
│  - 셀러 → 플랫폼에 문의 (정산, 광고, 시스템 등)                  │
│                                                                  │
│  [문의 처리 플로우]                                              │
│  1. 문의 등록 (카테고리 선택, 내용 작성, 첨부파일)               │
│  2. 담당자 배정                                                  │
│  3. 답변 작성                                                    │
│  4. 답변 완료 알림                                               │
│  5. 추가 문의 (재문의)                                           │
│                                                                  │
│  [FAQ]                                                           │
│  - 자주 묻는 질문 카테고리별 정리                                │
│  - 검색 기능                                                     │
│                                                                  │
│  [분쟁 처리]                                                     │
│  - 구매자-셀러 간 분쟁 발생                                      │
│  - 플랫폼 중재 요청                                              │
│  - 증거 자료 제출                                                │
│  - 플랫폼 판정                                                   │
│  - 조치 (환불, 경고, 자격 정지 등)                               │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 외부 연동 플로우

### 7.1 외부 채널 → 오픈마켓 (Webhook 수신)

```
┌─────────────────────────────────────────────────────────────────┐
│                   외부 채널 Webhook 수신 플로우                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [외부 채널]                     [오픈마켓]                      │
│       │                              │                           │
│       │   1. 주문 발생               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /webhook/order        │                           │
│       │                              │ → 주문 데이터 저장        │
│       │                              │ → 재고 차감               │
│       │                              │ → 셀러 알림               │
│       │                              │                           │
│       │   2. 주문 취소               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /webhook/cancel       │                           │
│       │                              │ → 주문 상태 변경          │
│       │                              │ → 재고 복구               │
│       │                              │                           │
│       │   3. 반품/교환 요청          │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /webhook/return       │                           │
│       │                              │ → 반품 접수 처리          │
│       │                              │                           │
│       │   4. 리뷰 등록               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /webhook/review       │                           │
│       │                              │ → 리뷰 데이터 저장        │
│       │                              │                           │
└─────────────────────────────────────────────────────────────────┘

[Webhook 이벤트 유형]
- order.created: 주문 생성
- order.paid: 결제 완료
- order.cancelled: 주문 취소
- order.return_requested: 반품 요청
- order.exchange_requested: 교환 요청
- product.status_changed: 상품 상태 변경 (채널에서 강제 변경 시)
- review.created: 리뷰 등록
- inquiry.created: 문의 등록
```

### 7.2 오픈마켓 → 외부 채널 (API 호출)

```
┌─────────────────────────────────────────────────────────────────┐
│                   외부 채널 API 호출 플로우                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [오픈마켓]                       [외부 채널]                    │
│       │                              │                           │
│       │   1. 상품 등록/수정          │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST/PUT /api/products     │                           │
│       │                              │ → 채널에 상품 등록        │
│       │ ◀────────────────────────── │                           │
│       │   channelProductId 반환      │                           │
│       │                              │                           │
│       │   2. 재고 동기화             │                           │
│       │ ──────────────────────────▶ │                           │
│       │   PUT /api/stock             │                           │
│       │                              │ → 재고 수량 업데이트      │
│       │                              │                           │
│       │   3. 발송 처리               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /api/orders/{id}/ship │                           │
│       │                              │ → 배송 정보 전달          │
│       │                              │                           │
│       │   4. 주문 조회               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   GET /api/orders            │                           │
│       │ ◀────────────────────────── │                           │
│       │   주문 목록 반환             │                           │
│       │                              │                           │
└─────────────────────────────────────────────────────────────────┘
```

### 7.3 오픈마켓 OpenAPI 제공

```
┌─────────────────────────────────────────────────────────────────┐
│                 오픈마켓 OpenAPI 제공 플로우                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [외부 파트너/서비스]            [오픈마켓 OpenAPI]              │
│       │                              │                           │
│       │   1. 인증                    │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /openapi/auth/token   │                           │
│       │ ◀────────────────────────── │                           │
│       │   accessToken 발급           │                           │
│       │                              │                           │
│       │   2. 상품 조회               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   GET /openapi/products      │                           │
│       │ ◀────────────────────────── │                           │
│       │   상품 목록 반환             │                           │
│       │                              │                           │
│       │   3. 상품 상세               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   GET /openapi/products/{id} │                           │
│       │ ◀────────────────────────── │                           │
│       │   상품 상세 정보             │                           │
│       │                              │                           │
│       │   4. 주문 생성               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   POST /openapi/orders       │                           │
│       │ ◀────────────────────────── │                           │
│       │   주문 ID 반환               │                           │
│       │                              │                           │
│       │   5. 주문 조회               │                           │
│       │ ──────────────────────────▶ │                           │
│       │   GET /openapi/orders/{id}   │                           │
│       │ ◀────────────────────────── │                           │
│       │   주문 상세 정보             │                           │
│       │                              │                           │
└─────────────────────────────────────────────────────────────────┘

[OpenAPI 기능 목록]
- 인증: 토큰 발급, 갱신
- 상품: 목록 조회, 상세 조회, 검색
- 재고: 재고 조회
- 주문: 주문 생성, 조회, 목록
- 카테고리: 카테고리 트리 조회
```

---

## 8. 플랫폼 관리자 플로우

### 8.1 플랫폼 관리자 기능

```
┌─────────────────────────────────────────────────────────────────┐
│                    플랫폼 관리자 대시보드                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [통계/현황]                                                     │
│  - 전체 거래액, 주문수, 회원수                                   │
│  - 일별/주별/월별 추이                                           │
│  - 카테고리별 매출                                               │
│                                                                  │
│  [회원 관리]                                                     │
│  - 회원 목록/검색                                                │
│  - 회원 상세 (주문 이력, 포인트, 쿠폰)                           │
│  - 회원 제재 (경고, 정지, 탈퇴 처리)                             │
│                                                                  │
│  [셀러 관리]                                                     │
│  - 셀러 목록/검색                                                │
│  - 입점 심사 (승인/반려)                                         │
│  - 셀러 등급 관리                                                │
│  - 셀러 제재                                                     │
│                                                                  │
│  [상품 관리]                                                     │
│  - 전체 상품 목록                                                │
│  - 상품 검수 (정책 위반 확인)                                    │
│  - 상품 강제 비공개/삭제                                         │
│                                                                  │
│  [주문/CS 관리]                                                  │
│  - 주문 현황                                                     │
│  - 분쟁 처리                                                     │
│  - 1:1 문의 관리                                                 │
│                                                                  │
│  [전시/프로모션 관리]                                            │
│  - 배너 관리                                                     │
│  - 기획전 관리                                                   │
│  - 쿠폰 발급 (플랫폼 쿠폰)                                       │
│                                                                  │
│  [정산 관리]                                                     │
│  - 정산 현황                                                     │
│  - 정산 실행                                                     │
│                                                                  │
│  [시스템 설정]                                                   │
│  - 카테고리 관리                                                 │
│  - 수수료 정책 설정                                              │
│  - 약관 관리                                                     │
│  - 공지사항 관리                                                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 9. 시스템 이벤트 흐름

### 9.1 주요 이벤트 목록

```
[주문 관련]
- order.created: 주문 생성됨
- order.paid: 결제 완료됨
- order.confirmed: 셀러가 주문 확인함
- order.shipped: 발송 처리됨
- order.delivered: 배송 완료됨
- order.purchase_confirmed: 구매 확정됨
- order.cancelled: 주문 취소됨
- order.return_requested: 반품 요청됨
- order.return_completed: 반품 완료됨

[결제 관련]
- payment.ready: 결제 준비됨
- payment.approved: 결제 승인됨
- payment.failed: 결제 실패함
- payment.cancelled: 결제 취소됨
- payment.refunded: 환불 완료됨

[상품 관련]
- product.created: 상품 등록됨
- product.updated: 상품 수정됨
- product.status_changed: 상품 상태 변경됨
- stock.decreased: 재고 차감됨
- stock.increased: 재고 증가됨
- stock.low: 재고 부족 (임계치 이하)

[정산 관련]
- settlement.calculated: 정산 계산됨
- settlement.confirmed: 정산 확정됨
- settlement.paid: 정산 지급됨

[회원 관련]
- member.registered: 회원 가입됨
- seller.approved: 셀러 승인됨
- shop.opened: 가게 오픈됨
```

### 9.2 이벤트 구독 예시

```
[order.paid 이벤트 발생 시]
├── 재고 서비스: 재고 차감
├── 알림 서비스: 셀러에게 알림
├── 포인트 서비스: 결제 금액 기반 적립 예정 등록
└── 외부 연동 서비스: 채널별 상태 동기화

[order.purchase_confirmed 이벤트 발생 시]
├── 포인트 서비스: 포인트 적립
├── 정산 서비스: 정산 대상 등록
└── 알림 서비스: 리뷰 작성 유도 알림
```

---

## 10. 데이터 흐름 요약

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         전체 데이터 흐름                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   [구매자]          [플랫폼]              [셀러]          [외부채널]    │
│      │                │                    │                 │          │
│      │  상품 검색     │                    │                 │          │
│      │ ─────────────▶│                    │                 │          │
│      │               │  상품 등록          │                 │          │
│      │               │ ◀─────────────────│                 │          │
│      │               │                    │  상품 연동       │          │
│      │               │ ◀─────────────────────────────────── │          │
│      │  주문 생성     │                    │                 │          │
│      │ ─────────────▶│ ─────────────────▶│                 │          │
│      │               │    주문 알림        │                 │          │
│      │  결제          │                    │                 │          │
│      │ ─────────────▶│                    │                 │          │
│      │               │  재고 차감          │                 │          │
│      │               │ ─────────────────▶│                 │          │
│      │               │                    │  발송 처리       │          │
│      │               │ ◀─────────────────│                 │          │
│      │               │  배송 정보 동기화   │                 │          │
│      │               │ ─────────────────────────────────── ▶│          │
│      │  배송 추적     │                    │                 │          │
│      │ ◀─────────────│                    │                 │          │
│      │  구매 확정     │                    │                 │          │
│      │ ─────────────▶│ ─────────────────▶│                 │          │
│      │               │    정산 등록        │                 │          │
│      │               │                    │  정산 지급       │          │
│      │               │ ─────────────────▶│                 │          │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```
