# 기능 플래그 프로젝트

피쳐 플래그 관리와 관련된 두 가지 프로젝트를 다룹니다.

1.  **`feature_flag`**: 직접 개발하여 피쳐 플래그 기능을 구현한 프로젝트입니다. 
2.  **`flag_speckit`**: speckit, gemini-cli를 이용하여 오로지 llm을 이용하여 구성한 프로젝트입니다.

## 프로젝트 개요

### `feature_flag`

이 프로젝트는 기능 릴리스를 제어하는 데 필요한 필수 기능을 제공하는 기능 플래그 관리 시스템입니다.

**1. 프로젝트 개요**

이 프로젝트는 Kotlin과 Spring Boot 프레임워크를 사용하여 개발된 기능 플래그 관리 시스템입니다.    
코드 배포 없이 기능 릴리스를 동적으로 제어할 수 있습니다.     
이를 통해 실시간으로 기능을 켜거나 끌 수 있어 카나리 릴리스, A/B 테스트 및 점진적 롤아웃을 용이하게 합니다.

**2. 아키텍처**

-   **프레젠테이션 계층**: HTTP 요청, 데이터 유효성 검사 및 직렬화를 처리합니다. 기능 플래그 기능을 노출하는 RESTful 컨트롤러로 구성됩니다.
-   **애플리케이션 계층**: 애플리케이션의 핵심 비즈니스 로직을 포함합니다. 특정 작업을 수행하기 위해 도메인 계층을 조율합니다.
-   **도메인 계층**: 비즈니스 로직의 핵심을 나타냅니다. 비즈니스 규칙을 캡슐화하는 엔티티, 값 객체 및 서비스를 포함합니다.
-   **인프라 계층**: 데이터베이스 상호 작용, 캐싱 및 외부 서비스와의 통신과 같은 기술적 문제를 관리합니다.

**사용된 기술**

-   **프레임워크**: Spring Boot 3.2
-   **언어**: Kotlin 1.9
-   **데이터베이스**: MySQL
-   **캐시**: Caffeine
-   **빌드 도구**: Gradle

**3. 로컬 환경 설정**

로컬 개발 환경을 설정하려면 Docker와 Java 17이 설치되어 있어야 합니다.

1.  **저장소 복제**:
    ```bash
    git clone https://github.com/your-repository/feature-flag.git
    cd feature-flag
    ```

2.  **데이터베이스 시작**:
    프로젝트에는 MySQL 컨테이너를 구성하는 `docker-compose.yml` 파일이 포함되어 있습니다. 데이터베이스를 시작하려면 다음을 실행하십시오.
    ```bash
    docker-compose up -d
    ```

3.  **애플리케이션 실행**:
    Gradle 래퍼를 사용하여 애플리케이션을 실행할 수 있습니다.
    ```bash
    ./gradlew bootRun
    ```

**4. API 엔드포인트**

애플리케이션에서 제공하는 주요 API 엔드포인트는 다음과 같습니다.

-   `POST /feature/register`: 새 기능을 등록합니다.
-   `PATCH /feature/group/{featureFlagGroupId}`: 기능 플래그를 활성화하거나 비활성화합니다.
-   `DELETE /feature/group/{featureFlagGroupId}`: 기능 플래그 그룹을 삭제합니다.
-   `POST /feature/group/register`: 특정 알고리즘(예: 백분율 기반 롤아웃)으로 기능 플래그를 등록합니다.

### `flag_speckit`

이 프로젝트는 다음을 포함하여 더 광범위한 기능을 제공하는 고급 기능 플래그 관리 시스템입니다.

-   기본 기능 토글
-   백분율 기반 롤아웃
-   속성 기반 타겟팅

**1. 프로젝트 개요**

이 프로젝트는 기능 릴리스를 제어하기 위한 포괄적인 솔루션을 제공하도록 설계된 기능 플래그 관리 시스템입니다.   
이 시스템은 기본 토글, 백분율 기반 롤아웃 및 속성 기반 타겟팅을 포함한 동적 기능 관리를 허용합니다.

**2. 아키텍처**

**백엔드**

백엔드는 Kotlin 및 Spring Boot로 구축되었으며 계층형 아키텍처를 따릅니다.

-   **컨트롤러 계층**: 기능 플래그 관리 및 평가를 위한 REST API를 노출합니다.
-   **서비스 계층**: 애플리케이션의 핵심 비즈니스 로직을 포함합니다.
-   **리포지토리 계층**: Spring Data JPA를 사용하여 데이터 지속성을 관리합니다.


**사용된 기술**

-   **백엔드**:
    -   **프레임워크**: Spring Boot 3.4.0
    -   **언어**: Kotlin 2.2.0
    -   **데이터베이스**: PostgreSQL
    -   **빌드 도구**: Gradle

**3. 로컬 환경 설정**

로컬 개발 환경을 설정하려면 Docker와 Java 17이 설치되어 있어야 합니다.

1.  **저장소 복제**:
    ```bash
    git clone https://github.com/your-repository/flag-speckit.git
    cd flag-speckit
    ```

2.  **서비스 시작**:
    프로젝트에는 PostgreSQL 및 Redis 컨테이너를 구성하는 `docker-compose.yml` 파일이 포함되어 있습니다. 서비스를 시작하려면 다음을 실행하십시오.
    ```bash
    docker-compose up -d
    ```

3.  **백엔드 실행**:
    Gradle 래퍼를 사용하여 백엔드 애플리케이션을 실행할 수 있습니다.
    ```bash
    ./gradlew bootRun
    ```

4.  **프론트엔드 열기**:
    웹 브라우저에서 `frontend/index.html` 파일을 열어 애플리케이션과 상호 작용하십시오.

**4. API 엔드포인트**

백엔드에서 제공하는 주요 API 엔드포인트는 다음과 같습니다.

**플래그 관리**

-   `POST /flags`: 새 기능 플래그를 생성합니다.
-   `PUT /flags/{name}`: 기능 플래그를 업데이트합니다.
-   `DELETE /flags/{name}`: 기능 플래그를 삭제합니다.
-   `GET /flags`: 모든 기능 플래그를 검색합니다.
-   `POST /flags/{name}/rules`: 기능 플래그에 새 규칙을 추가합니다.

**플래그 평가**

-   `POST /evaluate`: 주어진 컨텍스트에 대한 기능 플래그를 평가합니다.